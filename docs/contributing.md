# Contributing

The following is a set of guidelines for contributing to the GHGA Metadata
Schema.

Before you start, please refer to the [Code of Conduct](code-of-conduct.md).
By participating, you are expected to uphold its principles.

The GHGA Metadata Schema is authored using the LinkML framework. For
contributors who are interested in improving the schema it would be good to
first familiarize yourself with LinkML. There is a quick
start guide available [here](linkml-quickstart.md).


## Requesting or suggesting changes to the metadata schema

To request or suggest a change to the schema, first make sure you capture all
information required to incorporate the change or to facilitate a discussion
which can then translate to changes that can be incorporated into
the schema.

Please make use of one of the GitHub Issue Templates to make a request via
the GitHub Issue Tracker.


## Modifying the metadata schema

To add your contributions to the schema, we recomend using GitHub Fork and
Pull workflow which involves the following principles:


**Principle 1: Work from a personal fork**

Prior to adopting the workflow, a developer will perform a one-time setup to
create a personal fork of the
[ghga-de/ghga-metadata-schema](https://github.com/ghga-de/ghga-metadata-schema)
repository. This forked repository will be associated with the developer's
GitHub account, and is distinct from the main (upstream) repository.

**Principle 2: Commit to personal branches of that fork**

Changes should never be committed directly to the `main` or the `dev` branch
of the main repository. Instead, they should be composed as branches within
the developer's forked repository, where the developer can interate and
refine their code prior to submitting it for review.
The name of the branch should reflect a GitHub issue ticket
(For example, `issue-123`).

**Principle 3: Propose changes via pull request of personal branches**

Each set of changes will be developed in a task-specific branch in the
developer's forked repository, and then a pull request will be created to
develop and propose changes to the `dev` branch of the main repository.
Also, tag the maintainers to the PR for review. This mechanism provides a
way for developers to discuss, revise, and ultimately merge changes from
the forked repository to the main repository.

**Principle 4: Delete or ignore stale branches, but don't recycle merged ones**

Once a pull request has been merged, the task-specific branch is no longer
needed and may be deleted or ignored. It is bad practice to reuse an existing
branch once it has been merged. Instead, a subsequent branch and pull-request
cycle should begin if there are more additions to be made, after the PR has
been merged.

You may create a pull request in order to get feedback, but if you wish to
continue working on the branch, so state with "DO NOT MERGE YET" in the PR
title OR mark the pull request as a Draft OR label the pull request with a
'Do Not Merge' label.


**TL;DR**

- Fork the [ghga-de/ghga-metadata-schema](https://github.com/ghga-de/ghga-metadata-schema)
repository
- Create a new branch off of `dev` branch where the name of the new branch
reflects the issue ticket (for example, `issue-123`)
- Make the desired changes to the YAML
- Commit the changes
- Issue a new PR from your new branch to the `dev` branch
- Tag the maintainers for a PR review
- Do not recycle merged branches


**Note:** Please do not commit changes to the files in the `artifacts` folder.
These will be autogenerated once the PR is approved and merged.


## Reporting bugs

To report bugs, please make use of one of the GitHub Issue Templates to make a
ticket via the GitHub Issue Tracker.

Please provide as much information as you can regarding the bug:

- Description of the bug
- How to reproduce it
- Which version of the schema was used
- Any additional information that would be relevant (stacktrace, logs, etc.)

## Contributing guidelines for core developers

Core developers should follow these rules when processing pull requests:

- Ensure that all PRs originate from a fork
- Always wait for tests to pass before merging PRs
- Use "squash and merge" to merge PRs to maintain a clean commit history

